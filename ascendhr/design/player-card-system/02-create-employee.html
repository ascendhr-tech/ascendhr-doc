<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Create Employee | AscendHR</title>

  <!-- SHARED CSS -->
  <link rel="stylesheet" href="../_shared/base.css">

  <style>
    /* Feature-specific styles */
    .create-container {
      display: grid;
      grid-template-columns: 1fr 400px;
      gap: var(--space-8);
    }

    .form-section {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      padding: var(--space-6);
      margin-bottom: var(--space-6);
    }

    .section-title {
      font-size: var(--font-size-lg);
      font-weight: var(--font-weight-semibold);
      margin-bottom: var(--space-4);
      display: flex;
      align-items: center;
      gap: var(--space-2);
    }

    .photo-upload {
      display: flex;
      align-items: center;
      gap: var(--space-6);
      margin-bottom: var(--space-6);
    }

    .photo-preview {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      background: var(--gradient-primary);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 48px;
      color: white;
      border: 4px solid var(--border);
    }

    .photo-actions {
      display: flex;
      flex-direction: column;
      gap: var(--space-2);
    }

    /* Attribute Sliders */
    .attribute-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--space-4);
    }

    .attribute-item {
      background: var(--background);
      padding: var(--space-4);
      border-radius: var(--radius-md);
    }

    .attribute-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: var(--space-2);
    }

    .attribute-name {
      font-weight: var(--font-weight-medium);
      font-size: var(--font-size-sm);
    }

    .attribute-value {
      font-weight: var(--font-weight-bold);
      color: var(--primary);
    }

    .attribute-slider {
      width: 100%;
      height: 8px;
      border-radius: 4px;
      outline: none;
      -webkit-appearance: none;
      background: var(--border);
    }

    .attribute-slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: var(--primary);
      cursor: pointer;
      box-shadow: var(--shadow-medium);
    }

    /* Preview Card */
    .preview-panel {
      position: sticky;
      top: var(--space-8);
    }

    .player-card-preview {
      background: var(--gradient-primary);
      border-radius: var(--radius-xl);
      padding: var(--space-6);
      color: white;
      text-align: center;
    }

    .preview-avatar {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.2);
      margin: 0 auto var(--space-4);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 36px;
      border: 3px solid rgba(255, 255, 255, 0.5);
    }

    .preview-name {
      font-size: var(--font-size-xl);
      font-weight: var(--font-weight-bold);
      margin-bottom: var(--space-1);
    }

    .preview-position {
      opacity: 0.8;
      font-size: var(--font-size-sm);
      margin-bottom: var(--space-4);
    }

    .ability-display {
      display: flex;
      justify-content: center;
      gap: var(--space-6);
      margin-bottom: var(--space-4);
    }

    .ability-box {
      text-align: center;
    }

    .ability-value {
      font-size: 32px;
      font-weight: var(--font-weight-bold);
    }

    .ability-label {
      font-size: var(--font-size-xs);
      opacity: 0.8;
    }

    /* Radar Chart placeholder */
    .radar-chart {
      width: 200px;
      height: 200px;
      margin: var(--space-4) auto;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      opacity: 0.7;
    }

    .form-footer {
      display: flex;
      justify-content: space-between;
      padding-top: var(--space-6);
      border-top: 1px solid var(--border);
      margin-top: var(--space-6);
    }

    /* Success State */
    .state {
      display: none !important;
    }

    .state.active {
      display: block !important;
    }

    .success-container {
      text-align: center;
      padding: var(--space-12);
    }

    .success-icon {
      font-size: 64px;
      margin-bottom: var(--space-4);
    }

    .success-title {
      font-size: var(--font-size-2xl);
      font-weight: var(--font-weight-bold);
      margin-bottom: var(--space-2);
    }

    .success-subtitle {
      color: var(--muted-foreground);
      margin-bottom: var(--space-6);
    }

    .success-actions {
      display: flex;
      justify-content: center;
      gap: var(--space-4);
    }
  </style>
</head>

<body>
  <!-- 
    MOCKUP: Create Employee
    User Story: US-0.4.1
    
    INTERACTIVE: Fill form, adjust sliders, see preview update
  -->

  <div class="app-container">
    <!-- Unified Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="sidebar-brand">
          <div class="brand-icon">‚öΩ</div>
          <div class="brand-text">
            <span class="brand-name">Ascend FC</span>
            <span class="brand-subtitle">Club Manager</span>
          </div>
        </div>
      </div>
      <nav class="sidebar-nav">
        <div class="sidebar-section">
          <div class="sidebar-section-label">Main</div>
          <a href="../football-club-setup/03-invite-team.html" class="sidebar-item"><span class="icon">üìä</span>
            Dashboard</a>
          <a href="../formation-view/06-squad-builder.html" class="sidebar-item"><span class="icon">üë•</span> Squads</a>
          <a href="../formation-view/05-formation-pitch.html" class="sidebar-item"><span class="icon">üèüÔ∏è</span>
            Formation</a>
          <a href="04-player-gallery.html" class="sidebar-item active"><span class="icon">üÉè</span> Players</a>
        </div>
        <div class="sidebar-divider"></div>
        <div class="sidebar-section">
          <div class="sidebar-section-label">Management</div>
          <a href="../formation-view/01-department-management.html" class="sidebar-item"><span class="icon">üè¢</span>
            Departments</a>
          <a href="../formation-view/02-position-management.html" class="sidebar-item"><span class="icon">üìç</span>
            Positions</a>
          <a href="../formation-view/03-attribute-library.html" class="sidebar-item"><span class="icon">üéØ</span>
            Attributes</a>
          <a href="../formation-view/04-role-templates.html" class="sidebar-item"><span class="icon">üìã</span>
            Templates</a>
        </div>
      </nav>
      <div class="sidebar-user">
        <div class="user-avatar">JS</div>
        <div class="user-info">
          <div class="user-name">John Smith</div>
          <div class="user-role">Club Owner</div>
        </div>
        <button class="user-menu">‚ãÆ</button>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">

      <!-- FORM STATE -->
      <div id="form-state" class="state active">
        <header class="page-header">
          <div>
            <h1 class="page-title">Add New Employee</h1>
            <p style="color: var(--muted-foreground); margin-top: 4px;">Create a player card for your squad</p>
          </div>
        </header>

        <div class="create-container">
          <div class="form-area">
            <!-- Basic Info -->
            <div class="form-section">
              <h2 class="section-title">üë§ Basic Information</h2>

              <div class="photo-upload">
                <div class="photo-preview" id="photoPreview">üë§</div>
                <div class="photo-actions">
                  <button class="btn btn-secondary btn-sm">üì∑ Upload Photo</button>
                  <p style="font-size: 12px; color: var(--muted-foreground);">JPG or PNG, max 5MB</p>
                </div>
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label class="form-label">Full Name *</label>
                  <input type="text" class="form-input" id="employeeName" placeholder="John Smith"
                    oninput="updatePreview()">
                </div>
                <div class="form-group">
                  <label class="form-label">Email *</label>
                  <input type="email" class="form-input" placeholder="john.smith@company.com">
                </div>
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label class="form-label">Department *</label>
                  <select class="form-select" id="employeeDept" onchange="checkSelections()">
                    <option value="">Select department</option>
                    <option value="Engineering">Engineering</option>
                    <option value="Design">Design</option>
                    <option value="Sales">Sales</option>
                    <option value="HR">HR</option>
                  </select>
                </div>
                <div class="form-group">
                  <label class="form-label">Position *</label>
                  <select class="form-select" id="employeePosition" onchange="checkSelections()">
                    <option value="">Select position</option>
                    <option value="Frontend Developer">Frontend Developer</option>
                    <option value="Backend Developer">Backend Developer</option>
                    <option value="UX Designer">UX Designer</option>
                    <option value="Product Manager">Product Manager</option>
                    <option value="Tech Lead">Tech Lead</option>
                  </select>
                </div>
              </div>

              <div class="form-group">
                <label class="form-label">Reports To</label>
                <select class="form-select">
                  <option value="">Select manager (optional)</option>
                  <option value="1">John Smith - Tech Lead</option>
                  <option value="2">Sarah Johnson - Design Lead</option>
                  <option value="3">Lisa Taylor - HR Manager</option>
                </select>
              </div>
            </div>

            <!-- Attributes Section -->

            <!-- Placeholder: Select dept + position first -->
            <div class="form-section" id="attributePlaceholder">
              <h2 class="section-title">‚ö° Player Attributes</h2>
              <div style="text-align: center; padding: var(--space-8); color: var(--muted-foreground);">
                <div style="font-size: 48px; margin-bottom: var(--space-4);">üéØ</div>
                <h3 style="margin-bottom: var(--space-2);">Select Department & Position First</h3>
                <p>Attributes will be loaded based on the role template for the selected position.</p>
              </div>
            </div>

            <!-- Actual Attributes (hidden by default) -->
            <div class="form-section" id="attributesSection" style="display: none;">
              <h2 class="section-title">‚ö° Player Attributes <span id="roleInfo"
                  style="font-size: 14px; font-weight: normal; color: var(--muted-foreground);">(Tech Lead
                  Template)</span></h2>
              <p style="color: var(--muted-foreground); margin-bottom: var(--space-4);">Rate each skill from 1-20
                (Football Manager style)</p>

              <h3 style="font-size: 14px; color: var(--muted-foreground); margin-bottom: var(--space-3);">Core
                Attributes</h3>
              <div class="attribute-grid" style="margin-bottom: var(--space-6);">
                <div class="attribute-item">
                  <div class="attribute-header">
                    <span class="attribute-name">üéØ Leadership</span>
                    <span class="attribute-value" id="attr-leadership-val">10</span>
                  </div>
                  <input type="range" min="1" max="20" value="10" class="attribute-slider" id="attr-leadership"
                    oninput="updateAttribute('leadership')">
                </div>
                <div class="attribute-item">
                  <div class="attribute-header">
                    <span class="attribute-name">ü§ù Teamwork</span>
                    <span class="attribute-value" id="attr-teamwork-val">10</span>
                  </div>
                  <input type="range" min="1" max="20" value="10" class="attribute-slider" id="attr-teamwork"
                    oninput="updateAttribute('teamwork')">
                </div>
                <div class="attribute-item">
                  <div class="attribute-header">
                    <span class="attribute-name">üí¨ Communication</span>
                    <span class="attribute-value" id="attr-communication-val">10</span>
                  </div>
                  <input type="range" min="1" max="20" value="10" class="attribute-slider" id="attr-communication"
                    oninput="updateAttribute('communication')">
                </div>
                <div class="attribute-item">
                  <div class="attribute-header">
                    <span class="attribute-name">üîÑ Adaptability</span>
                    <span class="attribute-value" id="attr-adaptability-val">10</span>
                  </div>
                  <input type="range" min="1" max="20" value="10" class="attribute-slider" id="attr-adaptability"
                    oninput="updateAttribute('adaptability')">
                </div>
                <div class="attribute-item">
                  <div class="attribute-header">
                    <span class="attribute-name">üí™ Determination</span>
                    <span class="attribute-value" id="attr-determination-val">10</span>
                  </div>
                  <input type="range" min="1" max="20" value="10" class="attribute-slider" id="attr-determination"
                    oninput="updateAttribute('determination')">
                </div>
              </div>

              <h3 style="font-size: 14px; color: var(--muted-foreground); margin-bottom: var(--space-3);">Specialist
                Attributes</h3>
              <div class="attribute-grid">
                <div class="attribute-item">
                  <div class="attribute-header">
                    <span class="attribute-name">üíª Coding</span>
                    <span class="attribute-value" id="attr-coding-val">10</span>
                  </div>
                  <input type="range" min="1" max="20" value="10" class="attribute-slider" id="attr-coding"
                    oninput="updateAttribute('coding')">
                </div>
                <div class="attribute-item">
                  <div class="attribute-header">
                    <span class="attribute-name">üèóÔ∏è System Design</span>
                    <span class="attribute-value" id="attr-design-val">10</span>
                  </div>
                  <input type="range" min="1" max="20" value="10" class="attribute-slider" id="attr-design"
                    oninput="updateAttribute('design')">
                </div>
                <div class="attribute-item">
                  <div class="attribute-header">
                    <span class="attribute-name">üß© Problem Solving</span>
                    <span class="attribute-value" id="attr-problem-val">10</span>
                  </div>
                  <input type="range" min="1" max="20" value="10" class="attribute-slider" id="attr-problem"
                    oninput="updateAttribute('problem')">
                </div>
                <div class="attribute-item">
                  <div class="attribute-header">
                    <span class="attribute-name">‚ú® Code Quality</span>
                    <span class="attribute-value" id="attr-quality-val">10</span>
                  </div>
                  <input type="range" min="1" max="20" value="10" class="attribute-slider" id="attr-quality"
                    oninput="updateAttribute('quality')">
                </div>
                <div class="attribute-item">
                  <div class="attribute-header">
                    <span class="attribute-name">üìö Tech Learning</span>
                    <span class="attribute-value" id="attr-learning-val">10</span>
                  </div>
                  <input type="range" min="1" max="20" value="10" class="attribute-slider" id="attr-learning"
                    oninput="updateAttribute('learning')">
                </div>
              </div>
            </div>

            <!-- Potential -->
            <div class="form-section" id="potentialSection" style="display: none;">
              <h2 class="section-title">üìà Potential Ability</h2>
              <p style="color: var(--muted-foreground); margin-bottom: var(--space-4);">Estimate this player's growth
                potential (must be ‚â• current)</p>

              <div class="attribute-item" style="max-width: 400px;">
                <div class="attribute-header">
                  <span class="attribute-name">‚≠ê Potential Ability</span>
                  <span class="attribute-value" id="potentialVal">150</span>
                </div>
                <input type="range" min="1" max="200" value="150" class="attribute-slider" id="potentialSlider"
                  oninput="updatePotential()">
              </div>
            </div>

            <!-- Form Footer -->
            <div class="form-footer">
              <a href="01-employee-list.html" class="btn btn-secondary">Cancel</a>
              <button class="btn btn-primary" onclick="createEmployee()">üéÆ Create Player</button>
            </div>
          </div>

          <!-- Preview Panel -->
          <div class="preview-panel">
            <h3 style="margin-bottom: var(--space-4); color: var(--muted-foreground);">Player Card Preview</h3>
            <div class="player-card-preview">
              <div class="preview-avatar">üë§</div>
              <div class="preview-name" id="previewName">New Player</div>
              <div class="preview-position" id="previewPosition">Position</div>

              <div class="ability-display">
                <div class="ability-box">
                  <div class="ability-value" id="previewCurrent">100</div>
                  <div class="ability-label">Current</div>
                </div>
                <div class="ability-box">
                  <div class="ability-value" id="previewPotential">150</div>
                  <div class="ability-label">Potential</div>
                </div>
              </div>

              <div class="radar-chart">
                üìä Radar Chart
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- SUCCESS STATE -->
      <div id="success-state" class="state">
        <div class="success-container">
          <div class="success-icon">üéâ</div>
          <h2 class="success-title">Player Created!</h2>
          <p class="success-subtitle">The new employee has been added to your squad and an invitation email has been
            sent.</p>

          <div class="player-card-preview" style="max-width: 300px; margin: 0 auto var(--space-6);">
            <div class="preview-avatar">üë§</div>
            <div class="preview-name" id="successName">New Player</div>
            <div class="preview-position" id="successPosition">Position</div>
            <div class="ability-display">
              <div class="ability-box">
                <div class="ability-value" id="successCurrent">100</div>
                <div class="ability-label">Current</div>
              </div>
              <div class="ability-box">
                <div class="ability-value" id="successPotential">150</div>
                <div class="ability-label">Potential</div>
              </div>
            </div>
          </div>

          <div class="success-actions">
            <a href="01-employee-list.html" class="btn btn-secondary">‚Üê Back to List</a>
            <a href="03-employee-detail.html" class="btn btn-primary">View Player Card ‚Üí</a>
          </div>
        </div>
      </div>
    </main>
  </div>

  <script>
    function updateAttribute(name) {
      const slider = document.getElementById('attr-' + name);
      const display = document.getElementById('attr-' + name + '-val');
      display.textContent = slider.value;
      calculateAbility();
    }

    function calculateAbility() {
      const attrs = ['leadership', 'teamwork', 'communication', 'adaptability', 'determination',
        'coding', 'design', 'problem', 'quality', 'learning'];
      let total = 0;
      attrs.forEach(attr => {
        const slider = document.getElementById('attr-' + attr);
        if (slider) total += parseInt(slider.value);
      });
      document.getElementById('previewCurrent').textContent = total;
    }

    function updatePotential() {
      const val = document.getElementById('potentialSlider').value;
      document.getElementById('potentialVal').textContent = val;
      document.getElementById('previewPotential').textContent = val;
    }

    function updatePreview() {
      const name = document.getElementById('employeeName').value || 'New Player';
      const position = document.getElementById('employeePosition').value || 'Position';
      document.getElementById('previewName').textContent = name;
      document.getElementById('previewPosition').textContent = position;
    }

    function checkSelections() {
      const dept = document.getElementById('employeeDept').value;
      const position = document.getElementById('employeePosition').value;

      updatePreview();

      // Show attributes only when both are selected
      if (dept && position) {
        document.getElementById('attributePlaceholder').style.display = 'none';
        document.getElementById('attributesSection').style.display = 'block';
        document.getElementById('potentialSection').style.display = 'block';
        document.getElementById('roleInfo').textContent = '(' + position + ' Template)';
        calculateAbility();
      } else {
        document.getElementById('attributePlaceholder').style.display = 'block';
        document.getElementById('attributesSection').style.display = 'none';
        document.getElementById('potentialSection').style.display = 'none';
      }
    }

    function createEmployee() {
      // Copy values to success state
      document.getElementById('successName').textContent = document.getElementById('previewName').textContent;
      document.getElementById('successPosition').textContent = document.getElementById('previewPosition').textContent;
      document.getElementById('successCurrent').textContent = document.getElementById('previewCurrent').textContent;
      document.getElementById('successPotential').textContent = document.getElementById('previewPotential').textContent;

      // Switch states
      document.getElementById('form-state').classList.remove('active');
      document.getElementById('success-state').classList.add('active');
      window.scrollTo(0, 0);
    }

    // Initialize
    calculateAbility();
  </script>
</body>

</html>