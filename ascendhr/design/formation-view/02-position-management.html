<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Position Management | AscendHR</title>
  <link rel="stylesheet" href="../_shared/base.css">
  <style>
    .stats-row {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 16px;
      margin-bottom: 24px;
    }

    .stat-card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      padding: 20px;
    }

    .stat-value {
      font-size: 28px;
      font-weight: 700;
      color: var(--foreground);
    }

    .stat-label {
      font-size: 14px;
      color: var(--muted-foreground);
      margin-top: 4px;
    }

    .dept-accordion {
      margin-bottom: 16px;
    }

    .dept-header {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 16px;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      cursor: pointer;
      transition: all 0.2s;
    }

    .dept-header:hover {
      box-shadow: var(--shadow-soft);
    }

    .dept-header.expanded {
      border-radius: var(--radius-lg) var(--radius-lg) 0 0;
    }

    .dept-name {
      font-weight: 600;
      font-size: 16px;
      flex: 1;
    }

    .dept-count {
      font-size: 14px;
      color: var(--muted-foreground);
    }

    .chevron {
      transition: transform 0.2s;
    }

    .dept-header.expanded .chevron {
      transform: rotate(180deg);
    }

    .dept-content {
      display: none;
      padding: 16px;
      background: var(--background);
      border: 1px solid var(--border);
      border-top: none;
      border-radius: 0 0 var(--radius-lg) var(--radius-lg);
    }

    .dept-content.show {
      display: block;
    }

    .position-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 16px;
    }

    .position-card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      padding: 16px;
      cursor: pointer;
      transition: all 0.2s;
      position: relative;
    }

    .position-card:hover {
      box-shadow: var(--shadow-medium);
      transform: translateY(-2px);
    }

    .pos-title {
      font-weight: 600;
      font-size: 15px;
      margin-bottom: 4px;
    }

    .pos-dept {
      font-size: 12px;
      color: var(--muted-foreground);
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .pos-desc {
      font-size: 13px;
      color: var(--muted-foreground);
      margin-bottom: 12px;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .pos-attrs {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 12px;
    }

    .attr-tag {
      padding: 2px 8px;
      border-radius: var(--radius-full);
      font-size: 11px;
      font-weight: 500;
      background: var(--muted);
    }

    .attr-tag.critical {
      background: var(--destructive-light);
      color: var(--destructive);
    }

    .attr-tag.important {
      background: var(--primary-light);
      color: var(--primary);
    }

    .pos-stats {
      font-size: 12px;
      color: var(--muted-foreground);
    }

    .pos-actions {
      position: absolute;
      top: 12px;
      right: 12px;
      display: flex;
      gap: 4px;
      opacity: 0;
      transition: opacity 0.2s;
    }

    .position-card:hover .pos-actions {
      opacity: 1;
    }

    .icon-btn {
      padding: 6px;
      border: none;
      background: var(--white);
      cursor: pointer;
      border-radius: var(--radius-sm);
      font-size: 14px;
      box-shadow: var(--shadow-soft);
    }

    .icon-btn:hover {
      background: var(--muted);
    }

    .icon-btn.delete:hover {
      background: var(--destructive-light);
    }

    .detail-section {
      background: var(--background);
      padding: 16px;
      border-radius: var(--radius-md);
      border: 1px solid var(--border);
      margin-bottom: 16px;
    }

    .detail-section-title {
      font-weight: 600;
      font-size: 14px;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .detail-row {
      display: flex;
      justify-content: space-between;
      padding: 8px 0;
      border-bottom: 1px solid var(--border);
    }

    .detail-row:last-child {
      border-bottom: none;
    }

    .detail-label {
      font-size: 14px;
      color: var(--muted-foreground);
    }

    .detail-value {
      font-size: 14px;
      font-weight: 500;
    }

    .attr-table {
      width: 100%;
      font-size: 13px;
    }

    .attr-table th {
      text-align: left;
      padding: 8px;
      background: var(--muted);
      font-weight: 500;
    }

    .attr-table td {
      padding: 8px;
      border-bottom: 1px solid var(--border);
    }

    .priority-stars {
      color: #f59e0b;
    }

    .delete-warning {
      background: var(--destructive-light);
      border: 1px solid var(--destructive);
      border-radius: var(--radius-md);
      padding: 16px;
      margin-bottom: 16px;
      color: #991B1B;
    }

    .modal-tabs {
      display: flex;
      border-bottom: 1px solid var(--border);
      margin: -24px -24px 24px;
      padding: 0 24px;
    }

    .modal-tab {
      padding: 12px 16px;
      font-size: 14px;
      font-weight: 500;
      color: var(--muted-foreground);
      border-bottom: 2px solid transparent;
      cursor: pointer;
    }

    .modal-tab.active {
      color: var(--primary);
      border-color: var(--primary);
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    .zone-indicator {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 12px;
      border-radius: var(--radius-full);
      font-size: 12px;
      font-weight: 500;
      background: var(--muted);
      margin-left: 8px;
    }

    .zone-indicator.attack {
      background: var(--zone-attack-light);
      color: var(--zone-attack);
    }

    .zone-indicator.midfield {
      background: var(--zone-midfield-light);
      color: var(--zone-midfield);
    }

    .zone-indicator.defense {
      background: var(--zone-defense-light);
      color: var(--zone-defense);
    }

    .zone-indicator.support {
      background: var(--zone-support-light);
      color: var(--zone-support);
    }

    /* Improved Attributes UX */
    .selected-attrs {
      background: var(--accent-light);
      border: 1px dashed var(--accent);
      border-radius: var(--radius-md);
      padding: 12px;
      margin-bottom: 16px;
      min-height: 48px;
    }

    .selected-attrs-title {
      font-size: 12px;
      font-weight: 600;
      color: var(--accent);
      margin-bottom: 8px;
    }

    .selected-attrs-empty {
      font-size: 13px;
      color: var(--muted-foreground);
      font-style: italic;
    }

    .attr-chip {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: var(--white);
      border: 1px solid var(--border);
      border-radius: var(--radius-full);
      padding: 4px 8px 4px 12px;
      font-size: 12px;
      margin: 4px;
    }

    .attr-chip .chip-name {
      font-weight: 500;
    }

    .attr-chip .chip-priority {
      color: #f59e0b;
      font-size: 10px;
    }

    .attr-chip .chip-value {
      color: var(--primary);
      font-weight: 600;
    }

    .attr-chip .chip-remove {
      background: none;
      border: none;
      cursor: pointer;
      font-size: 14px;
      color: var(--muted-foreground);
      padding: 2px;
      border-radius: 50%;
    }

    .attr-chip .chip-remove:hover {
      background: var(--destructive-light);
      color: var(--destructive);
    }

    .attr-search {
      width: 100%;
      padding: 10px 12px 10px 36px;
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      font-size: 14px;
      margin-bottom: 16px;
      background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%23999'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z'/%3E%3C/svg%3E") no-repeat 10px center;
      background-size: 18px;
    }

    .attr-search:focus {
      outline: none;
      border-color: var(--primary);
    }

    .attr-category {
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      margin-bottom: 8px;
      overflow: hidden;
    }

    .attr-category-header {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 12px 16px;
      background: var(--muted);
      cursor: pointer;
      font-weight: 500;
      font-size: 14px;
    }

    .attr-category-header:hover {
      background: var(--border);
    }

    .attr-category-header .cat-chevron {
      margin-left: auto;
      transition: transform 0.2s;
    }

    .attr-category-header.collapsed .cat-chevron {
      transform: rotate(-90deg);
    }

    .attr-category-content {
      display: block;
    }

    .attr-category-header.collapsed+.attr-category-content {
      display: none;
    }

    .attr-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 10px 16px;
      border-bottom: 1px solid var(--border);
      transition: background 0.1s;
    }

    .attr-item:last-child {
      border-bottom: none;
    }

    .attr-item:hover {
      background: var(--background);
    }

    .attr-item.selected {
      background: var(--accent-light);
    }

    .attr-checkbox {
      width: 18px;
      height: 18px;
      accent-color: var(--primary);
      cursor: pointer;
    }

    .attr-item-name {
      flex: 1;
      font-size: 14px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .attr-item-icon {
      font-size: 16px;
    }

    .priority-select {
      padding: 4px 8px;
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      font-size: 12px;
      background: var(--white);
    }

    .min-value-input {
      width: 50px;
      padding: 4px 8px;
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      font-size: 12px;
      text-align: center;
    }

    .attr-legend {
      margin-top: 12px;
      padding: 10px;
      background: var(--muted);
      border-radius: var(--radius-md);
      font-size: 12px;
      color: var(--muted-foreground);
    }
  </style>
</head>

<body>
  <div class="app-container">
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="sidebar-brand">
          <div class="brand-icon">âš½</div>
          <div class="brand-text"><span class="brand-name">Ascend FC</span><span class="brand-subtitle">Club
              Manager</span></div>
        </div>
      </div>
      <nav class="sidebar-nav">
        <div class="sidebar-section">
          <div class="sidebar-section-label">Main</div>
          <a href="../football-club-setup/03-invite-team.html" class="sidebar-item"><span class="icon">ğŸ“Š</span>
            Dashboard</a>
          <a href="06-squad-builder.html" class="sidebar-item"><span class="icon">ğŸ‘¥</span> Squads</a>
          <a href="05-formation-pitch.html" class="sidebar-item"><span class="icon">ğŸŸï¸</span> Formation</a>
          <a href="../player-card-system/04-player-gallery.html" class="sidebar-item"><span class="icon">ğŸƒ</span>
            Players</a>
        </div>
        <div class="sidebar-divider"></div>
        <div class="sidebar-section">
          <div class="sidebar-section-label">Management</div>
          <a href="01-department-management.html" class="sidebar-item"><span class="icon">ğŸ¢</span> Departments</a>
          <a href="02-position-management.html" class="sidebar-item active"><span class="icon">ğŸ“</span> Positions</a>
          <a href="03-attribute-library.html" class="sidebar-item"><span class="icon">ğŸ¯</span> Attributes</a>
        </div>
      </nav>
      <div class="sidebar-user">
        <div class="user-avatar">JS</div>
        <div class="user-info">
          <div class="user-name">John Smith</div>
          <div class="user-role">Club Owner</div>
        </div>
        <button class="user-menu" onclick="toggleUserMenu(event)">â‹®</button>
        <div class="user-dropdown" id="userDropdown"
          style="display:none; position:absolute; bottom:60px; left:16px; right:16px; background:var(--card); border:1px solid var(--border); border-radius:var(--radius-md); box-shadow:var(--shadow-medium); z-index:100;">
          <a href="#"
            style="display:block; padding:12px 16px; color:var(--foreground); text-decoration:none; font-size:14px;"
            onmouseover="this.style.background='var(--muted)'" onmouseout="this.style.background='transparent'">âš™ï¸
            Settings</a>
          <a href="../football-club-setup/01-landing-registration.html"
            style="display:block; padding:12px 16px; color:var(--destructive); text-decoration:none; font-size:14px; border-top:1px solid var(--border);"
            onmouseover="this.style.background='var(--destructive-light)'"
            onmouseout="this.style.background='transparent'">ğŸšª Logout</a>
        </div>
      </div>
    </aside>
    <main class="main-content">
      <header class="page-header">
        <div>
          <h1 class="page-title">Positions</h1>
          <p class="text-muted">Define roles and their attribute requirements</p>
        </div>
        <button class="btn btn-primary" onclick="showAddModal()">+ Add Position</button>
      </header>
      <div class="stats-row">
        <div class="stat-card">
          <div class="stat-value">15</div>
          <div class="stat-label">Total Positions</div>
        </div>
        <div class="stat-card">
          <div class="stat-value">47</div>
          <div class="stat-label">Total Employees</div>
        </div>
        <div class="stat-card">
          <div style="display: flex; gap: 8px;"><span class="badge badge-attack">5</span><span
              class="badge badge-midfield">6</span><span class="badge badge-defense">3</span><span
              class="badge badge-support">1</span></div>
          <div class="stat-label">By Zone</div>
        </div>
      </div>
      <!-- Department Accordions -->
      <div id="cardView">
        <!-- Sales Department -->
        <div class="dept-accordion">
          <div class="dept-header expanded" onclick="toggleDept('sales')">
            <span class="dept-name">Sales</span>
            <span class="badge badge-attack">âš”ï¸ Attack</span>
            <span class="dept-count">3 positions â€¢ 12 employees</span>
            <span class="chevron">â–¼</span>
          </div>
          <div class="dept-content show" id="dept-sales">
            <div class="position-grid">
              <div class="position-card" onclick="showDetailModal(1)">
                <div class="pos-actions"><button class="icon-btn"
                    onclick="event.stopPropagation(); showDetailModal(1)">ğŸ‘ï¸</button><button class="icon-btn"
                    onclick="event.stopPropagation(); showEditModal(1)">âœï¸</button><button class="icon-btn delete"
                    onclick="event.stopPropagation(); showDeleteModal(1, 'Account Executive')">ğŸ—‘ï¸</button></div>
                <div class="pos-title">Account Executive</div>
                <div class="pos-dept">Sales <span class="badge badge-attack"
                    style="font-size:10px; padding:1px 6px;">Attack</span></div>
                <div class="pos-desc">Responsible for closing deals and generating revenue through direct sales efforts.
                </div>
                <div class="pos-attrs"><span class="attr-tag critical">Closing</span><span
                    class="attr-tag critical">Negotiation</span><span class="attr-tag important">Communication</span>
                </div>
                <div class="pos-stats">ğŸ‘¥ 4 employees</div>
              </div>
              <div class="position-card" onclick="showDetailModal(2)">
                <div class="pos-actions"><button class="icon-btn"
                    onclick="event.stopPropagation(); showDetailModal(2)">ğŸ‘ï¸</button><button class="icon-btn"
                    onclick="event.stopPropagation(); showEditModal(2)">âœï¸</button><button class="icon-btn delete"
                    onclick="event.stopPropagation(); showDeleteModal(2, 'Account Manager')">ğŸ—‘ï¸</button></div>
                <div class="pos-title">Account Manager</div>
                <div class="pos-dept">Sales <span class="badge badge-attack"
                    style="font-size:10px; padding:1px 6px;">Attack</span></div>
                <div class="pos-desc">Nurtures existing client relationships and identifies upselling opportunities.
                </div>
                <div class="pos-attrs"><span class="attr-tag critical">Client Relations</span><span
                    class="attr-tag important">Upselling</span></div>
                <div class="pos-stats">ğŸ‘¥ 5 employees</div>
              </div>
              <div class="position-card" onclick="showDetailModal(3)">
                <div class="pos-actions"><button class="icon-btn"
                    onclick="event.stopPropagation(); showDetailModal(3)">ğŸ‘ï¸</button><button class="icon-btn"
                    onclick="event.stopPropagation(); showEditModal(3)">âœï¸</button><button class="icon-btn delete"
                    onclick="event.stopPropagation(); showDeleteModal(3, 'Sales Development Rep')">ğŸ—‘ï¸</button></div>
                <div class="pos-title">Sales Development Rep</div>
                <div class="pos-dept">Sales <span class="badge badge-attack"
                    style="font-size:10px; padding:1px 6px;">Attack</span></div>
                <div class="pos-desc">Qualifies leads and sets appointments for Account Executives.</div>
                <div class="pos-attrs"><span class="attr-tag critical">Prospecting</span><span
                    class="attr-tag important">Communication</span></div>
                <div class="pos-stats">ğŸ‘¥ 3 employees</div>
              </div>
            </div>
          </div>
        </div>
        <!-- Engineering Department -->
        <div class="dept-accordion">
          <div class="dept-header" onclick="toggleDept('engineering')">
            <span class="dept-name">Engineering</span>
            <span class="badge badge-midfield">âš™ï¸ Midfield</span>
            <span class="dept-count">4 positions â€¢ 13 employees</span>
            <span class="chevron">â–¼</span>
          </div>
          <div class="dept-content" id="dept-engineering">
            <div class="position-grid">
              <div class="position-card" onclick="showDetailModal(4)">
                <div class="pos-actions"><button class="icon-btn"
                    onclick="event.stopPropagation(); showDetailModal(4)">ğŸ‘ï¸</button><button class="icon-btn"
                    onclick="event.stopPropagation(); showEditModal(4)">âœï¸</button><button class="icon-btn delete"
                    onclick="event.stopPropagation(); showDeleteModal(4, 'Senior Backend Developer')">ğŸ—‘ï¸</button></div>
                <div class="pos-title">Senior Backend Developer</div>
                <div class="pos-dept">Engineering <span class="badge badge-midfield"
                    style="font-size:10px; padding:1px 6px;">Midfield</span></div>
                <div class="pos-desc">Designs and maintains server-side applications and APIs.</div>
                <div class="pos-attrs"><span class="attr-tag critical">Coding</span><span
                    class="attr-tag critical">System Design</span><span class="attr-tag important">Problem
                    Solving</span></div>
                <div class="pos-stats">ğŸ‘¥ 5 employees</div>
              </div>
              <div class="position-card" onclick="showDetailModal(5)">
                <div class="pos-actions"><button class="icon-btn"
                    onclick="event.stopPropagation(); showDetailModal(5)">ğŸ‘ï¸</button><button class="icon-btn"
                    onclick="event.stopPropagation(); showEditModal(5)">âœï¸</button><button class="icon-btn delete"
                    onclick="event.stopPropagation(); showDeleteModal(5, 'Frontend Developer')">ğŸ—‘ï¸</button></div>
                <div class="pos-title">Frontend Developer</div>
                <div class="pos-dept">Engineering <span class="badge badge-midfield"
                    style="font-size:10px; padding:1px 6px;">Midfield</span></div>
                <div class="pos-desc">Builds responsive web interfaces and user experiences.</div>
                <div class="pos-attrs"><span class="attr-tag critical">Coding</span><span
                    class="attr-tag important">Visual Design</span><span class="attr-tag">UX Thinking</span></div>
                <div class="pos-stats">ğŸ‘¥ 4 employees</div>
              </div>
              <div class="position-card" onclick="showDetailModal(6)">
                <div class="pos-actions"><button class="icon-btn"
                    onclick="event.stopPropagation(); showDetailModal(6)">ğŸ‘ï¸</button><button class="icon-btn"
                    onclick="event.stopPropagation(); showEditModal(6)">âœï¸</button><button class="icon-btn delete"
                    onclick="event.stopPropagation(); showDeleteModal(6, 'Tech Lead')">ğŸ—‘ï¸</button></div>
                <div class="pos-title">Tech Lead</div>
                <div class="pos-dept">Engineering <span class="badge badge-midfield"
                    style="font-size:10px; padding:1px 6px;">Midfield</span></div>
                <div class="pos-desc">Leads technical direction and mentors the development team.</div>
                <div class="pos-attrs"><span class="attr-tag critical">Leadership</span><span
                    class="attr-tag critical">Coding</span><span class="attr-tag important">Communication</span></div>
                <div class="pos-stats">ğŸ‘¥ 2 employees</div>
              </div>
              <div class="position-card" onclick="showDetailModal(7)">
                <div class="pos-actions"><button class="icon-btn"
                    onclick="event.stopPropagation(); showDetailModal(7)">ğŸ‘ï¸</button><button class="icon-btn"
                    onclick="event.stopPropagation(); showEditModal(7)">âœï¸</button><button class="icon-btn delete"
                    onclick="event.stopPropagation(); showDeleteModal(7, 'DevOps Engineer')">ğŸ—‘ï¸</button></div>
                <div class="pos-title">DevOps Engineer</div>
                <div class="pos-dept">Engineering <span class="badge badge-midfield"
                    style="font-size:10px; padding:1px 6px;">Midfield</span></div>
                <div class="pos-desc">Manages CI/CD pipelines and cloud infrastructure.</div>
                <div class="pos-attrs"><span class="attr-tag critical">Infrastructure</span><span
                    class="attr-tag critical">Automation</span></div>
                <div class="pos-stats">ğŸ‘¥ 2 employees</div>
              </div>
            </div>
          </div>
        </div>
        <!-- Design Department -->
        <div class="dept-accordion">
          <div class="dept-header" onclick="toggleDept('design')">
            <span class="dept-name">Design</span>
            <span class="badge badge-midfield">âš™ï¸ Midfield</span>
            <span class="dept-count">2 positions â€¢ 6 employees</span>
            <span class="chevron">â–¼</span>
          </div>
          <div class="dept-content" id="dept-design">
            <div class="position-grid">
              <div class="position-card" onclick="showDetailModal(8)">
                <div class="pos-actions"><button class="icon-btn"
                    onclick="event.stopPropagation(); showDetailModal(8)">ğŸ‘ï¸</button><button class="icon-btn"
                    onclick="event.stopPropagation(); showEditModal(8)">âœï¸</button><button class="icon-btn delete"
                    onclick="event.stopPropagation(); showDeleteModal(8, 'UX/UI Designer')">ï¿½ï¿½ï¸</button></div>
                <div class="pos-title">UX/UI Designer</div>
                <div class="pos-dept">Design <span class="badge badge-midfield"
                    style="font-size:10px; padding:1px 6px;">Midfield</span></div>
                <div class="pos-desc">Creates user-centered designs and interactive prototypes.</div>
                <div class="pos-attrs"><span class="attr-tag critical">UX Thinking</span><span
                    class="attr-tag critical">Visual Design</span><span class="attr-tag important">Prototyping</span>
                </div>
                <div class="pos-stats">ğŸ‘¥ 4 employees</div>
              </div>
              <div class="position-card" onclick="showDetailModal(9)">
                <div class="pos-actions"><button class="icon-btn"
                    onclick="event.stopPropagation(); showDetailModal(9)">ğŸ‘ï¸</button><button class="icon-btn"
                    onclick="event.stopPropagation(); showEditModal(9)">âœï¸</button><button class="icon-btn delete"
                    onclick="event.stopPropagation(); showDeleteModal(9, 'Product Designer')">ğŸ—‘ï¸</button></div>
                <div class="pos-title">Product Designer</div>
                <div class="pos-dept">Design <span class="badge badge-midfield"
                    style="font-size:10px; padding:1px 6px;">Midfield</span></div>
                <div class="pos-desc">Shapes product strategy through design thinking.</div>
                <div class="pos-attrs"><span class="attr-tag critical">Design Thinking</span><span
                    class="attr-tag important">Research</span></div>
                <div class="pos-stats">ğŸ‘¥ 2 employees</div>
              </div>
            </div>
          </div>
        </div>
        <!-- Finance Department -->
        <div class="dept-accordion">
          <div class="dept-header" onclick="toggleDept('finance')">
            <span class="dept-name">Finance</span>
            <span class="badge badge-defense">ğŸ›¡ï¸ Defense</span>
            <span class="dept-count">2 positions â€¢ 5 employees</span>
            <span class="chevron">â–¼</span>
          </div>
          <div class="dept-content" id="dept-finance">
            <div class="position-grid">
              <div class="position-card" onclick="showDetailModal(10)">
                <div class="pos-actions"><button class="icon-btn"
                    onclick="event.stopPropagation(); showDetailModal(10)">ğŸ‘ï¸</button><button class="icon-btn"
                    onclick="event.stopPropagation(); showEditModal(10)">âœï¸</button><button class="icon-btn delete"
                    onclick="event.stopPropagation(); showDeleteModal(10, 'Financial Controller')">ğŸ—‘ï¸</button></div>
                <div class="pos-title">Financial Controller</div>
                <div class="pos-dept">Finance <span class="badge badge-defense"
                    style="font-size:10px; padding:1px 6px;">Defense</span></div>
                <div class="pos-desc">Oversees financial operations and reporting.</div>
                <div class="pos-attrs"><span class="attr-tag critical">Process Management</span><span
                    class="attr-tag important">Documentation</span></div>
                <div class="pos-stats">ğŸ‘¥ 3 employees</div>
              </div>
              <div class="position-card" onclick="showDetailModal(11)">
                <div class="pos-actions"><button class="icon-btn"
                    onclick="event.stopPropagation(); showDetailModal(11)">ğŸ‘ï¸</button><button class="icon-btn"
                    onclick="event.stopPropagation(); showEditModal(11)">âœï¸</button><button class="icon-btn delete"
                    onclick="event.stopPropagation(); showDeleteModal(11, 'Accountant')">ğŸ—‘ï¸</button></div>
                <div class="pos-title">Accountant</div>
                <div class="pos-dept">Finance <span class="badge badge-defense"
                    style="font-size:10px; padding:1px 6px;">Defense</span></div>
                <div class="pos-desc">Manages day-to-day financial transactions.</div>
                <div class="pos-attrs"><span class="attr-tag critical">Attention to Detail</span><span
                    class="attr-tag important">Analysis</span></div>
                <div class="pos-stats">ğŸ‘¥ 2 employees</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Add/Edit Position Modal -->
  <div class="modal-overlay" id="addEditModal" style="display: none;">
    <div class="modal" style="max-width: 700px;">
      <div class="modal-header">
        <h2 class="modal-title" id="modalTitle">Add Position</h2>
        <button class="modal-close" onclick="hideModal('addEditModal')">Ã—</button>
      </div>
      <div class="modal-body">
        <div class="modal-tabs">
          <div class="modal-tab active" onclick="switchTab(0)">ğŸ“‹ Details</div>
          <div class="modal-tab" onclick="switchTab(1)">ğŸ¯ Attributes</div>
        </div>
        <!-- Tab 1: Details -->
        <div class="tab-content active" id="tab-0">
          <div class="form-group">
            <label class="form-label">Position Title *</label>
            <input type="text" class="form-input" id="posTitle" placeholder="e.g., Senior Backend Developer">
          </div>
          <div class="form-group">
            <label class="form-label">Department *</label>
            <div style="display: flex; gap: 12px; align-items: center;">
              <select class="form-input" id="posDept" onchange="onDeptChange()" style="flex:1;">
                <option value="">Select department...</option>
                <option value="sales" data-zone="attack">Sales</option>
                <option value="marketing" data-zone="attack">Marketing</option>
                <option value="engineering" data-zone="midfield">Engineering</option>
                <option value="design" data-zone="midfield">Design</option>
                <option value="finance" data-zone="defense">Finance</option>
                <option value="legal" data-zone="defense">Legal</option>
                <option value="hr" data-zone="support">Human Resources</option>
              </select>
              <span class="zone-indicator" id="zoneIndicator" style="display:none;"></span>
            </div>
            <p class="form-hint">Zone is inherited from department</p>
          </div>
          <div class="form-group">
            <label class="form-label">Description</label>
            <textarea class="form-input" id="posDesc" rows="3"
              placeholder="Brief description of this role..."></textarea>
          </div>
        </div>
        <!-- Tab 2: Attributes - Improved UX -->
        <div class="tab-content" id="tab-1">
          <!-- Selected Attributes Summary -->
          <div class="selected-attrs">
            <div class="selected-attrs-title">âœ“ Selected Attributes (<span id="selectedCount">4</span>)</div>
            <div id="selectedChips">
              <span class="attr-chip"><span class="chip-name">ğŸ’» Coding</span><span
                  class="chip-priority">â˜…â˜…â˜…</span><span class="chip-value">15+</span><button class="chip-remove"
                  onclick="removeAttr('coding')">Ã—</button></span>
              <span class="attr-chip"><span class="chip-name">ğŸ—ï¸ System Design</span><span
                  class="chip-priority">â˜…â˜…â˜…</span><span class="chip-value">13+</span><button class="chip-remove"
                  onclick="removeAttr('design')">Ã—</button></span>
              <span class="attr-chip"><span class="chip-name">ğŸ¯ Leadership</span><span
                  class="chip-priority">â˜…â˜…â˜†</span><span class="chip-value">12+</span><button class="chip-remove"
                  onclick="removeAttr('leadership')">Ã—</button></span>
              <span class="attr-chip"><span class="chip-name">ğŸ¤ Teamwork</span><span
                  class="chip-priority">â˜…â˜…â˜…</span><span class="chip-value">14+</span><button class="chip-remove"
                  onclick="removeAttr('teamwork')">Ã—</button></span>
            </div>
          </div>
          <!-- Search -->
          <input type="text" class="attr-search" id="attrSearch" placeholder="Search attributes..."
            oninput="filterAttrs()">
          <!-- Category: Core Attributes -->
          <div class="attr-category">
            <div class="attr-category-header" onclick="toggleCategory(this)">ğŸ¯ Core Attributes (Soft Skills)<span
                class="cat-chevron">â–¼</span></div>
            <div class="attr-category-content">
              <div class="attr-item selected" data-name="leadership"><input type="checkbox" class="attr-checkbox"
                  checked onchange="toggleAttr(this, 'leadership')"><span class="attr-item-name"><span
                    class="attr-item-icon">ğŸ¯</span>Leadership</span><select class="priority-select">
                  <option>â˜…</option>
                  <option selected>â˜…â˜…</option>
                  <option>â˜…â˜…â˜…</option>
                </select><input type="number" class="min-value-input" value="12" min="1" max="20">+</div>
              <div class="attr-item selected" data-name="teamwork"><input type="checkbox" class="attr-checkbox" checked
                  onchange="toggleAttr(this, 'teamwork')"><span class="attr-item-name"><span
                    class="attr-item-icon">ğŸ¤</span>Teamwork</span><select class="priority-select">
                  <option>â˜…</option>
                  <option>â˜…â˜…</option>
                  <option selected>â˜…â˜…â˜…</option>
                </select><input type="number" class="min-value-input" value="14" min="1" max="20">+</div>
              <div class="attr-item" data-name="communication"><input type="checkbox" class="attr-checkbox"
                  onchange="toggleAttr(this, 'communication')"><span class="attr-item-name"><span
                    class="attr-item-icon">ğŸ’¬</span>Communication</span><select class="priority-select">
                  <option selected>â˜…</option>
                  <option>â˜…â˜…</option>
                  <option>â˜…â˜…â˜…</option>
                </select><input type="number" class="min-value-input" value="10" min="1" max="20">+</div>
              <div class="attr-item" data-name="adaptability"><input type="checkbox" class="attr-checkbox"
                  onchange="toggleAttr(this, 'adaptability')"><span class="attr-item-name"><span
                    class="attr-item-icon">ğŸ”„</span>Adaptability</span><select class="priority-select">
                  <option selected>â˜…</option>
                  <option>â˜…â˜…</option>
                  <option>â˜…â˜…â˜…</option>
                </select><input type="number" class="min-value-input" value="10" min="1" max="20">+</div>
              <div class="attr-item" data-name="creativity"><input type="checkbox" class="attr-checkbox"
                  onchange="toggleAttr(this, 'creativity')"><span class="attr-item-name"><span
                    class="attr-item-icon">ğŸ’¡</span>Creativity</span><select class="priority-select">
                  <option selected>â˜…</option>
                  <option>â˜…â˜…</option>
                  <option>â˜…â˜…â˜…</option>
                </select><input type="number" class="min-value-input" value="10" min="1" max="20">+</div>
            </div>
          </div>
          <!-- Category: Technical Attributes -->
          <div class="attr-category">
            <div class="attr-category-header" onclick="toggleCategory(this)">âš¡ Technical Attributes<span
                class="cat-chevron">â–¼</span></div>
            <div class="attr-category-content">
              <div class="attr-item selected" data-name="coding"><input type="checkbox" class="attr-checkbox" checked
                  onchange="toggleAttr(this, 'coding')"><span class="attr-item-name"><span
                    class="attr-item-icon">ğŸ’»</span>Coding</span><select class="priority-select">
                  <option>â˜…</option>
                  <option>â˜…â˜…</option>
                  <option selected>â˜…â˜…â˜…</option>
                </select><input type="number" class="min-value-input" value="15" min="1" max="20">+</div>
              <div class="attr-item selected" data-name="design"><input type="checkbox" class="attr-checkbox" checked
                  onchange="toggleAttr(this, 'design')"><span class="attr-item-name"><span
                    class="attr-item-icon">ğŸ—ï¸</span>System Design</span><select class="priority-select">
                  <option>â˜…</option>
                  <option>â˜…â˜…</option>
                  <option selected>â˜…â˜…â˜…</option>
                </select><input type="number" class="min-value-input" value="13" min="1" max="20">+</div>
              <div class="attr-item" data-name="problem"><input type="checkbox" class="attr-checkbox"
                  onchange="toggleAttr(this, 'problem')"><span class="attr-item-name"><span
                    class="attr-item-icon">ğŸ§©</span>Problem Solving</span><select class="priority-select">
                  <option>â˜…</option>
                  <option selected>â˜…â˜…</option>
                  <option>â˜…â˜…â˜…</option>
                </select><input type="number" class="min-value-input" value="12" min="1" max="20">+</div>
              <div class="attr-item" data-name="ux"><input type="checkbox" class="attr-checkbox"
                  onchange="toggleAttr(this, 'ux')"><span class="attr-item-name"><span class="attr-item-icon">âœ¨</span>UX
                  Thinking</span><select class="priority-select">
                  <option selected>â˜…</option>
                  <option>â˜…â˜…</option>
                  <option>â˜…â˜…â˜…</option>
                </select><input type="number" class="min-value-input" value="10" min="1" max="20">+</div>
              <div class="attr-item" data-name="data"><input type="checkbox" class="attr-checkbox"
                  onchange="toggleAttr(this, 'data')"><span class="attr-item-name"><span
                    class="attr-item-icon">ğŸ“Š</span>Data Analysis</span><select class="priority-select">
                  <option selected>â˜…</option>
                  <option>â˜…â˜…</option>
                  <option>â˜…â˜…â˜…</option>
                </select><input type="number" class="min-value-input" value="10" min="1" max="20">+</div>
            </div>
          </div>
          <!-- Category: Business Attributes -->
          <div class="attr-category">
            <div class="attr-category-header collapsed" onclick="toggleCategory(this)">ğŸ“ˆ Business Attributes<span
                class="cat-chevron">â–¼</span></div>
            <div class="attr-category-content">
              <div class="attr-item" data-name="negotiation"><input type="checkbox" class="attr-checkbox"
                  onchange="toggleAttr(this, 'negotiation')"><span class="attr-item-name"><span
                    class="attr-item-icon">ğŸ¤</span>Negotiation</span><select class="priority-select">
                  <option selected>â˜…</option>
                  <option>â˜…â˜…</option>
                  <option>â˜…â˜…â˜…</option>
                </select><input type="number" class="min-value-input" value="10" min="1" max="20">+</div>
              <div class="attr-item" data-name="sales"><input type="checkbox" class="attr-checkbox"
                  onchange="toggleAttr(this, 'sales')"><span class="attr-item-name"><span
                    class="attr-item-icon">ğŸ’°</span>Sales</span><select class="priority-select">
                  <option selected>â˜…</option>
                  <option>â˜…â˜…</option>
                  <option>â˜…â˜…â˜…</option>
                </select><input type="number" class="min-value-input" value="10" min="1" max="20">+</div>
              <div class="attr-item" data-name="strategy"><input type="checkbox" class="attr-checkbox"
                  onchange="toggleAttr(this, 'strategy')"><span class="attr-item-name"><span
                    class="attr-item-icon">ğŸ¯</span>Strategic Thinking</span><select class="priority-select">
                  <option selected>â˜…</option>
                  <option>â˜…â˜…</option>
                  <option>â˜…â˜…â˜…</option>
                </select><input type="number" class="min-value-input" value="10" min="1" max="20">+</div>
            </div>
          </div>
          <div class="attr-legend"><strong>Priority:</strong> â˜… Nice-to-have | â˜…â˜… Important | â˜…â˜…â˜… Critical</div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" onclick="hideModal('addEditModal')">Cancel</button>
        <button class="btn btn-primary" id="saveBtn">Save Position</button>
      </div>
    </div>
  </div>

  <!-- Detail View Modal -->
  <div class="modal-overlay" id="detailModal" style="display: none;">
    <div class="modal" style="max-width: 600px;">
      <div class="modal-header">
        <h2 class="modal-title">Position Details</h2>
        <button class="modal-close" onclick="hideModal('detailModal')">Ã—</button>
      </div>
      <div class="modal-body">
        <div class="detail-section">
          <div class="detail-section-title">ğŸ“‹ Overview</div>
          <div class="detail-row"><span class="detail-label">Position</span><span class="detail-value"
              id="detailTitle">Senior Backend Developer</span></div>
          <div class="detail-row"><span class="detail-label">Department</span><span class="detail-value"><span
                id="detailDept">Engineering</span> <span class="badge badge-midfield" id="detailZoneBadge"
                style="font-size:10px;">Midfield</span></span></div>
          <div class="detail-row"><span class="detail-label">Description</span><span class="detail-value"
              id="detailDesc" style="text-align:right; max-width:60%;">Designs and maintains server-side
              applications</span></div>
        </div>
        <div class="detail-section">
          <div class="detail-section-title">ğŸ¯ Attribute Requirements</div>
          <table class="attr-table">
            <thead>
              <tr>
                <th>Attribute</th>
                <th>Priority</th>
                <th>Min Value</th>
              </tr>
            </thead>
            <tbody id="detailAttrs">
              <tr>
                <td>ğŸ’» Coding</td>
                <td class="priority-stars">â˜…â˜…â˜…</td>
                <td>15+</td>
              </tr>
              <tr>
                <td>ğŸ—ï¸ System Design</td>
                <td class="priority-stars">â˜…â˜…â˜…</td>
                <td>13+</td>
              </tr>
              <tr>
                <td>ğŸ¤ Teamwork</td>
                <td class="priority-stars">â˜…â˜…â˜…</td>
                <td>14+</td>
              </tr>
              <tr>
                <td>ğŸ¯ Leadership</td>
                <td class="priority-stars">â˜…â˜…â˜†</td>
                <td>12+</td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="detail-section">
          <div class="detail-section-title">ğŸ‘¥ Team Information</div>
          <div class="detail-row"><span class="detail-label">Current Employees</span><span class="detail-value"
              id="detailEmployees">5 employees</span></div>
        </div>
        <div class="detail-section">
          <div class="detail-section-title">ğŸ“… Metadata</div>
          <div class="detail-row"><span class="detail-label">Created On</span><span class="detail-value"
              id="detailCreated">Jan 15, 2024</span></div>
          <div class="detail-row"><span class="detail-label">Last Updated</span><span class="detail-value"
              id="detailUpdated">Mar 20, 2024</span></div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" onclick="hideModal('detailModal')">Close</button>
        <button class="btn btn-primary" onclick="hideModal('detailModal'); showEditModal(currentPosId)">Edit
          Position</button>
      </div>
    </div>
  </div>

  <!-- Delete Confirmation Modal -->
  <div class="modal-overlay" id="deleteModal" style="display: none;">
    <div class="modal" style="max-width: 480px;">
      <div class="modal-header">
        <h2 class="modal-title">Delete Position</h2>
        <button class="modal-close" onclick="hideModal('deleteModal')">Ã—</button>
      </div>
      <div class="modal-body">
        <div class="delete-warning"><strong>âš ï¸ Warning:</strong> This action cannot be undone.</div>
        <p style="margin-bottom: 16px;">Are you sure you want to delete the position "<strong id="deletePosName">Senior
            Backend Developer</strong>"?</p>
        <p style="color: var(--muted-foreground); font-size: 14px;"><span id="deleteImpact">5 employees currently hold
            this position.</span></p>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" onclick="hideModal('deleteModal')">Cancel</button>
        <button class="btn btn-destructive" onclick="confirmDelete()">Delete Position</button>
      </div>
    </div>
  </div>

  <script>
    const positions = {
      1: { title: 'Account Executive', dept: 'Sales', zone: 'attack', desc: 'Responsible for closing deals.', employees: 4, created: 'Jan 15, 2024', updated: 'Mar 20, 2024' },
      2: { title: 'Account Manager', dept: 'Sales', zone: 'attack', desc: 'Nurtures client relationships.', employees: 5, created: 'Jan 18, 2024', updated: 'Mar 15, 2024' },
      3: { title: 'Sales Development Rep', dept: 'Sales', zone: 'attack', desc: 'Qualifies leads.', employees: 3, created: 'Feb 01, 2024', updated: 'Mar 22, 2024' },
      4: { title: 'Senior Backend Developer', dept: 'Engineering', zone: 'midfield', desc: 'Designs server-side applications.', employees: 5, created: 'Jan 10, 2024', updated: 'Mar 18, 2024' },
      5: { title: 'Frontend Developer', dept: 'Engineering', zone: 'midfield', desc: 'Builds web interfaces.', employees: 4, created: 'Jan 12, 2024', updated: 'Mar 20, 2024' },
      6: { title: 'Tech Lead', dept: 'Engineering', zone: 'midfield', desc: 'Leads technical direction.', employees: 2, created: 'Jan 08, 2024', updated: 'Mar 15, 2024' },
      7: { title: 'DevOps Engineer', dept: 'Engineering', zone: 'midfield', desc: 'Manages CI/CD pipelines.', employees: 2, created: 'Feb 05, 2024', updated: 'Mar 10, 2024' },
      8: { title: 'UX/UI Designer', dept: 'Design', zone: 'midfield', desc: 'Creates user-centered designs.', employees: 4, created: 'Jan 20, 2024', updated: 'Mar 12, 2024' },
      9: { title: 'Product Designer', dept: 'Design', zone: 'midfield', desc: 'Shapes product strategy.', employees: 2, created: 'Feb 01, 2024', updated: 'Mar 08, 2024' },
      10: { title: 'Financial Controller', dept: 'Finance', zone: 'defense', desc: 'Oversees financial operations.', employees: 3, created: 'Jan 12, 2024', updated: 'Mar 15, 2024' },
      11: { title: 'Accountant', dept: 'Finance', zone: 'defense', desc: 'Manages transactions.', employees: 2, created: 'Jan 15, 2024', updated: 'Mar 10, 2024' }
    };
    const zoneMap = { attack: 'âš”ï¸ Attack', midfield: 'âš™ï¸ Midfield', defense: 'ğŸ›¡ï¸ Defense', support: 'ğŸ¥ Support' };
    let currentPosId = null;

    function showAddModal() {
      document.getElementById('modalTitle').textContent = 'Add Position';
      document.getElementById('saveBtn').textContent = 'Save Position';
      document.getElementById('posTitle').value = '';
      document.getElementById('posDept').value = '';
      document.getElementById('posDesc').value = '';
      document.getElementById('zoneIndicator').style.display = 'none';
      switchTab(0);
      currentPosId = null;
      document.getElementById('addEditModal').style.display = 'flex';
    }

    function showEditModal(id) {
      const pos = positions[id];
      if (!pos) return;
      document.getElementById('modalTitle').textContent = 'Edit Position';
      document.getElementById('saveBtn').textContent = 'Update Position';
      document.getElementById('posTitle').value = pos.title;
      document.getElementById('posDept').value = pos.dept.toLowerCase();
      document.getElementById('posDesc').value = pos.desc;
      onDeptChange();
      switchTab(0);
      currentPosId = id;
      document.getElementById('addEditModal').style.display = 'flex';
    }

    function showDetailModal(id) {
      const pos = positions[id];
      if (!pos) return;
      document.getElementById('detailTitle').textContent = pos.title;
      document.getElementById('detailDept').textContent = pos.dept;
      document.getElementById('detailZoneBadge').textContent = zoneMap[pos.zone].split(' ')[1];
      document.getElementById('detailZoneBadge').className = 'badge badge-' + pos.zone;
      document.getElementById('detailDesc').textContent = pos.desc;
      document.getElementById('detailEmployees').textContent = pos.employees + ' employees';
      document.getElementById('detailCreated').textContent = pos.created;
      document.getElementById('detailUpdated').textContent = pos.updated;
      currentPosId = id;
      document.getElementById('detailModal').style.display = 'flex';
    }

    function showDeleteModal(id, name) {
      const pos = positions[id];
      document.getElementById('deletePosName').textContent = name;
      document.getElementById('deleteImpact').textContent = pos ? pos.employees + ' employees currently hold this position.' : '';
      document.getElementById('deleteModal').style.display = 'flex';
    }

    function hideModal(modalId) { document.getElementById(modalId).style.display = 'none'; }
    function confirmDelete() { alert('Position deleted!'); hideModal('deleteModal'); }
    function switchTab(i) {
      document.querySelectorAll('.modal-tab').forEach((t, j) => t.classList.toggle('active', i === j));
      document.querySelectorAll('.tab-content').forEach((c, j) => c.classList.toggle('active', i === j));
    }
    function toggleDept(id) {
      const h = document.querySelector(`[onclick="toggleDept('${id}')"]`);
      const c = document.getElementById('dept-' + id);
      h.classList.toggle('expanded');
      c.classList.toggle('show');
    }
    function onDeptChange() {
      const s = document.getElementById('posDept');
      const ind = document.getElementById('zoneIndicator');
      const opt = s.options[s.selectedIndex];
      if (opt && opt.dataset.zone) {
        ind.textContent = zoneMap[opt.dataset.zone];
        ind.className = 'zone-indicator ' + opt.dataset.zone;
        ind.style.display = 'inline-flex';
      } else { ind.style.display = 'none'; }
    }
    function toggleCategory(el) { el.classList.toggle('collapsed'); }
    function filterAttrs() {
      const q = document.getElementById('attrSearch').value.toLowerCase();
      document.querySelectorAll('.attr-item').forEach(item => {
        const name = item.dataset.name;
        item.style.display = name.includes(q) ? 'flex' : 'none';
      });
    }
    function toggleAttr(cb, name) {
      const item = cb.closest('.attr-item');
      item.classList.toggle('selected', cb.checked);
      updateSelectedChips();
    }
    function removeAttr(name) {
      const item = document.querySelector(`.attr-item[data-name="${name}"]`);
      if (item) {
        item.querySelector('.attr-checkbox').checked = false;
        item.classList.remove('selected');
      }
      updateSelectedChips();
    }
    function updateSelectedChips() {
      const selected = document.querySelectorAll('.attr-item.selected');
      document.getElementById('selectedCount').textContent = selected.length;
      // In a real app, we'd rebuild chips here
    }
    document.querySelectorAll('.modal-overlay').forEach(o => {
      o.addEventListener('click', e => { if (e.target === o) o.style.display = 'none'; });
    });

    function toggleUserMenu(e) {
      e.stopPropagation();
      const dropdown = document.getElementById('userDropdown');
      dropdown.style.display = dropdown.style.display === 'none' ? 'block' : 'none';
    }
    document.addEventListener('click', function () {
      document.getElementById('userDropdown').style.display = 'none';
    });
  </script>
</body>

</html>